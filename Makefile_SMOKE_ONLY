# Makefile_SMOKE_ONLY â€” baseline lineare e pulita

SMOKE_CORE = \
  01_Core/Loventre_Core_Prelude.v \
  01_Core/Loventre_Kernel.v \
  01_Core/Loventre_Foundation_Types.v \
  01_Core/Loventre_Foundation_Params.v \
  01_Core/Loventre_Foundation_Entropy.v

SMOKE_ADVANCED = \
  02_Advanced/Loventre_Curvature_Field.v \
  02_Advanced/Loventre_Potential_Field.v \
  02_Advanced/Loventre_Barrier_Model.v \
  02_Advanced/Loventre_Tunneling_Model.v \
  02_Advanced/Loventre_Risk_From_Tunneling.v \
  02_Advanced/Loventre_Risk_Level.v \
  02_Advanced/Loventre_Risk_Level_Bridge.v \
  02_Advanced/Loventre_SAFE_Model.v \
  02_Advanced/Loventre_Class_Model.v \
  02_Advanced/Loventre_Class_Properties.v \
  02_Advanced/Loventre_Phase_Assembly.v

SMOKE_GEOMETRY = \
  02_Advanced/Geometry/Loventre_Formal_Core.v \
  02_Advanced/Geometry/Loventre_LMetrics_Phase_Predicates.v \
  02_Advanced/Geometry/Loventre_LMetrics_Structure.v \
  02_Advanced/Loventre_LMetrics_JSON_Witness.v

verify:
	find . -type f \( -name "*.vo" -o -name "*.vos" -o -name "*.vok" -o -name "*.glob" \) -delete
	for f in $(SMOKE_CORE); do \
	  coqc -Q 01_Core Loventre_Core $$f || exit 1 ; \
	done
	for f in $(SMOKE_ADVANCED); do \
	  coqc -Q 01_Core Loventre_Core \
	       -Q 02_Advanced Loventre_Advanced $$f || exit 1 ; \
	done
	for f in $(SMOKE_GEOMETRY); do \
	  coqc -Q 01_Core Loventre_Core \
	       -Q 02_Advanced Loventre_Advanced \
	       -Q 02_Advanced/Geometry Loventre_Advanced.Geometry $$f || exit 1 ; \
	done

